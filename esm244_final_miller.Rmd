---
title: "ESM 244 - Final"
author: "Jamie K. Miller"
date: "February 14, 2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r packages, include = FALSE}
# load packages

library(tidyverse)
library(janitor)
library(lubridate)

```
###This code chunk is old - do not use.
```{r, include = FALSE}
# Load data

#transect <- read_csv("transect.csv") %>% 
#  clean_names()

# From this dataset we want Date, Transect block, total male, total female, unknown, juvs, and wrack

#avian <- read_csv("avian.csv")%>% 
#  clean_names()

# From this dataset we want date, Transect block, species, and count

```

```{r}

snpl <- transect %>%
  select(survey_date, transect_block, total_male, total_female, unknown_individual, juvenile) %>% 
  mutate(snpl = total_male + total_female + unknown_individual + juvenile) %>% 
  filter(snpl > 0)

snpl_clean <- snpl %>%
  select(survey_date, transect_block, snpl) %>% 
  rename(count = snpl)

wrack <- transect %>%
  select(survey_date, transect_block, wrack)

avian_clean <- avian %>% 
  select(survey_date, transect_block, species, species_name, species_type, count)

```

```{r}
# Merge test # 1
# Merge snpl_clean with avian_clean into new df
# then all SNPL entries will show NA in species, species_name, and species_type

vafb_birds_combine <- bind_rows(avian_clean, snpl_clean)  # yay it worked!

# The following three code snippets convert 'NA' values in the species, species_name, and species_type columns to 'SNPL', 'Snowy Plover', and 'Shorebird', repectively. Each column needed to be a character for it to work, according to Google.

vafb_birds_combine$species <- as.character(vafb_birds_combine$species)
vafb_birds_combine$species <- ifelse(is.na(vafb_birds_combine$species),'SNPL',vafb_birds_combine$species)

vafb_birds_combine$species_name <- as.character(vafb_birds_combine$species_name)
vafb_birds_combine$species_name <- ifelse(is.na(vafb_birds_combine$species_name),'Snowy Plover',vafb_birds_combine$species_name)

vafb_birds_combine$species_type <- as.character(vafb_birds_combine$species_type)
vafb_birds_combine$species_type <- ifelse(is.na(vafb_birds_combine$species_type),'Shorebird',vafb_birds_combine$species_type)

# ok, so now we can use this data to make some graphs
# will probably need to summarize at some point

```

```{r}

ggplot(vafb_birds_combine) +
  geom_point(aes(x = survey_date, y = count, color = species))

# this looks awful


```
### Use this to read in data.
```{r, include = FALSE}
# Load all updated data. Let's try this again.

transect <- read_csv("transect_updated.csv") %>% 
  clean_names()
# From this dataset we want Date, Transect block, total male, total female, unknown, and juvs. I added a totals column in excel to double check numbers.

avian <- read_csv("avian_updated.csv")%>% 
  clean_names()
# From this dataset we want date, Transect block, species, and count

wrack <- read_csv("wrack_updated.csv")%>% 
  clean_names()
# wrack values, date, and transect block

lookup_avian <- read_csv("lookup_avian.csv")%>% 
  clean_names()
# Has 4-letter avian code from AOU species list found here: https://www.pwrc.usgs.gov/bbl/manual/speclist.cfm or species_list.pdf in repo

lookup_blocks <- read_csv("transect_block_coords.csv")%>% 
  clean_names()
# transect block names, beach section initial code, region designation, and gps coords

```